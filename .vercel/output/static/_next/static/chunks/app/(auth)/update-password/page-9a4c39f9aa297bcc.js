(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1984],{642:(e,t,r)=>{"use strict";r.d(t,{N:()=>w});var s=r(5155),a=r(2115),n=r(9551),l=r(8819),i=r(4524),o=r(5131),u=r(1138),c=r(4866);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class h extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,u.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:t,anchorX:r,root:n}){let l=(0,a.useId)(),i=(0,a.useRef)(null),o=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,a.useContext)(c.Q),f=function(...e){return a.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=d(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(i,e?.ref);return(0,a.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:c,right:d}=o.current;if(t||!i.current||!e||!s)return;let h="left"===r?`left: ${c}`:`right: ${d}`;i.current.dataset.motionPopId=l;let f=document.createElement("style");u&&(f.nonce=u);let p=n??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${h}px !important;
            top: ${a}px !important;
          }
        `),()=>{p.contains(f)&&p.removeChild(f)}},[t]),(0,s.jsx)(h,{isPresent:t,childRef:i,sizeRef:o,children:a.cloneElement(e,{ref:f})})}let p=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:u,mode:c,anchorX:d,root:h})=>{let p=(0,l.M)(m),g=(0,a.useId)(),x=!0,b=(0,a.useMemo)(()=>(x=!1,{id:g,initial:t,isPresent:r,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[r,p,n]);return u&&x&&(b={...b}),(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[r]),a.useEffect(()=>{r||p.size||!n||n()},[r]),"popLayout"===c&&(e=(0,s.jsx)(f,{isPresent:r,anchorX:d,root:h,children:e})),(0,s.jsx)(o.t.Provider,{value:b,children:e})};function m(){return new Map}var g=r(9196);let x=e=>e.key||"";function b(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let w=({children:e,custom:t,initial:r=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:c="sync",propagate:d=!1,anchorX:h="left",root:f})=>{let[m,w]=(0,g.xQ)(d),y=(0,a.useMemo)(()=>b(e),[e]),v=d&&!m?[]:y.map(x),j=(0,a.useRef)(!0),N=(0,a.useRef)(y),_=(0,l.M)(()=>new Map),[k,E]=(0,a.useState)(y),[I,S]=(0,a.useState)(y);(0,i.E)(()=>{j.current=!1,N.current=y;for(let e=0;e<I.length;e++){let t=x(I[e]);v.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[I,v.length,v.join("-")]);let C=[];if(y!==k){let e=[...y];for(let t=0;t<I.length;t++){let r=I[t],s=x(r);v.includes(s)||(e.splice(t,0,r),C.push(r))}return"wait"===c&&C.length&&(e=C),S(b(e)),E(y),null}let{forceRender:P}=(0,a.useContext)(n.L);return(0,s.jsx)(s.Fragment,{children:I.map(e=>{let a=x(e),n=(!d||!!m)&&(y===I||v.includes(a));return(0,s.jsx)(p,{isPresent:n,initial:(!j.current||!!r)&&void 0,custom:t,presenceAffectsLayout:u,mode:c,root:f,onExitComplete:n?void 0:()=>{if(!_.has(a))return;_.set(a,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(P?.(),S(N.current),d&&w?.(),o&&o())},anchorX:h,children:e},a)})})}},1165:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},1628:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2985:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>o});var s=r(5155),a=r(2115),n=r(3318),l=r(3321);let i=(0,a.createContext)(void 0);function o({children:e}){let[t,r]=(0,a.useState)(null),[o,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[h,f]=(0,a.useState)(!0),[p,m]=(0,a.useState)(null),[g]=(0,a.useState)(()=>(0,n.createBrowserClient)("https://lbjymlodxprzqgtyqtcq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxianltbG9keHByenFndHlxdGNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzNDk1MzEsImV4cCI6MjA3ODkyNTUzMX0.m9k-Id03Kt1scFWvIuK354EHjiO0Y-d8mbO53QqSMRU")),x=(0,l.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let{data:e}=await g.auth.getSession();u(e.session),r(e.session?.user??null),e.session?.user&&await b(e.session.user.id)}catch(e){}finally{f(!1)}})();let{data:e}=g.auth.onAuthStateChange(async(e,t)=>{u(t),r(t?.user??null),t?.user?await b(t.user.id):d(null),"SIGNED_OUT"===e&&x.push("/login")});return()=>{e?.subscription.unsubscribe()}},[g,x]);let b=async e=>{try{let{data:t,error:r}=await g.from("user_settings").select().eq("user_id",e).single();r&&r.code,d(t||null)}catch(e){}},w=async(e,t,r)=>{try{m(null);let{data:s,error:a}=await g.auth.signUp({email:e,password:t,options:{emailRedirectTo:`${window.location.origin}/auth/callback`,data:r}});if(a)return m(a.message),{user:null,error:a};return{user:s.user,error:null}}catch(t){let e=t instanceof Error?t:Error("Sign up failed");return m(e.message),{user:null,error:e}}},y=async(e,t)=>{try{m(null);let{data:r,error:s}=await g.auth.signInWithPassword({email:e,password:t});if(s)return m(s.message),{user:null,error:s};return{user:r.user,error:null}}catch(t){let e=t instanceof Error?t:Error("Sign in failed");return m(e.message),{user:null,error:e}}},v=async()=>{try{m(null);let{error:e}=await g.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(e)return m(e.message),{error:e};return{error:null}}catch(t){let e=t instanceof Error?t:Error("Google sign in failed");return m(e.message),{error:e}}},j=async e=>{try{m(null);let{error:t}=await g.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/callback?next=/update-password`});if(t)return m(t.message),{error:t};return{error:null}}catch(t){let e=t instanceof Error?t:Error("Reset password failed");return m(e.message),{error:e}}},N=async e=>{try{m(null);let{error:t}=await g.auth.updateUser({password:e});if(t)return m(t.message),{error:t};return{error:null}}catch(t){let e=t instanceof Error?t:Error("Update password failed");return m(e.message),{error:e}}},_=async()=>{try{m(null),await g.auth.signOut(),r(null),u(null),d(null)}catch(t){let e=t instanceof Error?t:Error("Sign out failed");throw m(e.message),e}},k=async e=>{try{if(!t)throw Error("User not authenticated");m(null);let{data:r,error:s}=await g.from("user_settings").upsert({user_id:t.id,...e,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select().single();if(s)throw s;d(r)}catch(t){let e=t instanceof Error?t:Error("Update failed");throw m(e.message),e}},E=async()=>{try{if(!t)return;await b(t.id)}catch(e){console.error("Refresh user error:",e)}};return(0,s.jsx)(i.Provider,{value:{user:t,session:o,userSettings:c,loading:h,error:p,signUp:w,signIn:y,signInWithGoogle:v,resetPassword:j,updatePassword:N,signOut:_,updateUserSettings:k,refreshUser:E},children:e})}function u(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},5608:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5155),a=r(2115),n=r(3321),l=r(8500),i=r.n(l),o=r(5772),u=r(2985),c=r(5777),d=r(1165),h=r(1628),f=r(642),p=r(4817);let m=["/branding/resource_8Yu5GfUCC29dqKx3x0skXr.png","/branding/resource_8vxcerNBlWE4yxe6z7t4nh.png","/branding/resource_9Fnvkd0qdNf9kUnicIO_4i.png","/branding/resource_9Jl0RXn61UJdSrgTMuDOHn.png","/branding/resource_9ltCVdMUYmv9yVAyBQIkEL.png","/branding/resource_9mC_ELBS7fC2fnV2ZG_Oiy.png","/branding/resource_aQYFm53KqYX5LsYT4nok53.png","/branding/resource_ahUbsyF9X0Y9I4uijZ-O0g.png","/branding/resource_aoavD787FGN3LgBj6ENk1f.png","/branding/resource_b48jIDhedfi7SNQrCI4_tG.png","/branding/resource_bA3PtO8TZ_X01qLbyPx4CV.png","/branding/resource_baoMoNSrueT23LGWB1c_fA.png","/branding/resource_bq982z4VJm6bDMH2oYdk1N.png","/branding/resource_bxSAiNMJ85y4XpeAi2k4or.png"];function g(){let e=(0,n.useRouter)(),{updatePassword:t}=(0,u.A)(),[r,l]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[_,k]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=setInterval(()=>{k(e=>(e+1)%m.length)},4e3);return()=>clearInterval(e)},[]);let E=e=>e?e.length<12?"Password must be at least 12 characters":/[A-Z]/.test(e)?/[a-z]/.test(e)?/[0-9]/.test(e)?/[^A-Za-z0-9]/.test(e)?null:"Password must contain at least one special character (!@#$%^&*)":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":null,I=async s=>{s.preventDefault(),w(!0),v(null);try{if(!r||!g)throw Error("Please fill in all fields");if(r!==g)throw Error("Passwords do not match");let s=E(r);if(s)throw Error(s);let{error:a}=await t(r);if(a)throw a;e.push("/dashboard")}catch(e){v(e instanceof Error?e.message:"Update failed")}finally{w(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white flex font-sans",children:[(0,s.jsxs)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,s.jsx)("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-900/20 rounded-full blur-[120px] animate-pulse-glow"}),(0,s.jsx)("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-blue-900/20 rounded-full blur-[120px] animate-pulse-glow [animation-delay:1s]"})]}),(0,s.jsxs)("div",{className:"max-w-md w-full relative z-10",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)(i(),{href:"/",className:"inline-flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"relative w-12 h-12",children:(0,s.jsx)(o.default,{src:"/callwaiting ai logo.png",alt:"CallWaiting AI Logo",fill:!0,className:"object-contain"})}),(0,s.jsx)("span",{className:"text-3xl font-bold tracking-tight",children:"CallWaiting AI"})]}),(0,s.jsx)("h1",{className:"text-4xl font-serif font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-b from-white to-white/60",children:"New Password"}),(0,s.jsx)("p",{className:"text-slate-400 font-light",children:"Secure your account with a new password"})]}),(0,s.jsx)("div",{className:"glass-panel p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl",children:(0,s.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[y&&(0,s.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-red-400 text-sm",children:y})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"New Password"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-purple-400 transition-colors"}),(0,s.jsx)("input",{type:"password",value:r,onChange:e=>{var t;l(t=e.target.value),N(E(t))},placeholder:"Min. 12 characters",required:!0,className:`w-full pl-10 pr-4 py-3 bg-black/40 border rounded-xl text-white placeholder-slate-600 focus:outline-none transition-all ${j?"border-red-500/50 focus:border-red-500 focus:ring-1 focus:ring-red-500":"border-white/10 focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50"}`})]}),j&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-2 pl-1",children:j})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Confirm Password"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-purple-400 transition-colors"}),(0,s.jsx)("input",{type:"password",value:g,onChange:e=>x(e.target.value),placeholder:"Min. 12 characters",required:!0,className:"w-full pl-10 pr-4 py-3 bg-black/40 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 transition-all"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-white text-black hover:bg-slate-200 disabled:bg-slate-800 disabled:text-slate-500 font-bold py-3.5 px-4 rounded-full transition-all duration-300 shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:shadow-[0_0_25px_rgba(255,255,255,0.25)] flex items-center justify-center gap-2 mt-4",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:["Update Password",(0,s.jsx)(h.A,{className:"w-4 h-4"})]})})]})})]})]}),(0,s.jsxs)("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-purple-900/20 to-blue-900/20 items-center justify-center p-12 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(120,119,198,0.1),transparent_50%)]"}),(0,s.jsxs)("div",{className:"relative w-full max-w-2xl aspect-[4/3] rounded-2xl overflow-hidden shadow-2xl",children:[(0,s.jsx)(f.N,{mode:"wait",children:(0,s.jsx)(p.P.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:1,ease:"easeInOut"},className:"absolute inset-0",children:(0,s.jsx)(o.default,{src:m[_],alt:`CallWaiting AI Branding ${_+1}`,fill:!0,className:"object-contain",priority:0===_})},_)}),(0,s.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:m.map((e,t)=>(0,s.jsx)("button",{onClick:()=>k(t),className:`h-1.5 rounded-full transition-all duration-300 ${t===_?"w-8 bg-white":"w-1.5 bg-white/40 hover:bg-white/60"}`,"aria-label":`Go to slide ${t+1}`},t))})]}),(0,s.jsxs)("div",{className:"absolute bottom-12 left-12 right-12 text-center",children:[(0,s.jsx)(p.P.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"text-3xl font-bold text-white mb-2",children:"Secure Access"},`title-${_}`),(0,s.jsx)(p.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.8},className:"text-slate-300 text-lg",children:"Recover your account in seconds"},`subtitle-${_}`)]})]})]})}},5772:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(7651),a=r.n(s)},5777:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},7651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={default:function(){return c},getImageProps:function(){return u}};for(var a in s)Object.defineProperty(t,a,{enumerable:!0,get:s[a]});let n=r(3623),l=r(5413),i=r(8437),o=n._(r(6095));function u(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=i.Image},8139:(e,t,r)=>{Promise.resolve().then(r.bind(r,5608))}},e=>{e.O(0,[8500,5946,8346,8437,8441,8928,7358],()=>e(e.s=8139)),_N_E=e.O()}]);