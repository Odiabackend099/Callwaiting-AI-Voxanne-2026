(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{723:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8340).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),l=s(2115),r=s(4817),i=s(3321),n=s(723),o=s(8340);let c=(0,o.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),d=(0,o.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var u=s(8774);function m(){let e=(0,i.useRouter)(),[t,s]=(0,l.useState)(!0),[o,m]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),[f,p]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[y,w]=(0,l.useState)("professional"),[v,N]=(0,l.useState)(""),[j,k]=(0,l.useState)([]);(0,l.useEffect)(()=>{_()},[]);let _=async()=>{try{let t=await (0,u.HW)();if(!t)return void e.push("/auth/login");x(t.id);let[s,a]=await Promise.all([(0,u.h_)(t.id),(0,u.gd)(t.id)]);s&&(p(s.business_name||""),g(s.system_prompt||""),w(s.voice_personality||"professional")),k(a)}catch(e){console.error("Failed to load settings:",e)}finally{s(!1)}},S=async()=>{if(h){m(!0);try{if(await (0,u.uT)(h,{business_name:f,system_prompt:b,voice_personality:y}),v.trim()){await (0,u.pQ)(h,v,"knowledge.txt"),N("");let e=await (0,u.gd)(h);k(e)}alert("Settings saved successfully!")}catch(e){console.error("Failed to save settings:",e),alert(`Failed to save settings: ${e.message}`)}finally{m(!1)}}},I=async e=>{if(confirm("Are you sure you want to delete this knowledge base document?"))try{await (0,u.Jr)(e),k(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete knowledge base:",e),alert(`Failed to delete: ${e.message}`)}};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Loading settings..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/dashboard"),className:"flex items-center gap-2 text-slate-400 hover:text-white mb-4 transition-colors",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Voice Agent Settings"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Configure your Roxanne AI voice agent"})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Business Name"}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"e.g., Elite Aesthetics Clinic",className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Voice Personality"}),(0,a.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,a.jsx)("option",{value:"professional",children:"Professional"}),(0,a.jsx)("option",{value:"friendly",children:"Friendly"}),(0,a.jsx)("option",{value:"casual",children:"Casual"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"System Prompt"}),(0,a.jsx)("textarea",{value:b,onChange:e=>g(e.target.value),placeholder:"You are Roxanne, a helpful AI receptionist for [Business Name]. You assist with...",rows:6,className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Define how Roxanne should behave and respond to customers"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Add Knowledge Base Content"}),(0,a.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),placeholder:"Enter information about your services, pricing, FAQs, etc.",rows:6,className:"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This information will be used to answer customer questions"})]}),j.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Existing Knowledge Base Documents"}),(0,a.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-900 border border-slate-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:e.filename}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsx)("button",{onClick:()=>I(e.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",children:(0,a.jsx)(c,{className:"w-4 h-4"})})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsxs)("button",{onClick:S,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,a.jsx)(d,{className:"w-5 h-5"}),o?"Saving...":"Save Settings"]})})]})]})})}},5086:(e,t,s)=>{Promise.resolve().then(s.bind(s,3680))},6385:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var a=s(3318);let l=null,r=l=(0,a.createBrowserClient)("https://lbjymlodxprzqgtyqtcq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxianltbG9keHByenFndHlxdGNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzNDk1MzEsImV4cCI6MjA3ODkyNTUzMX0.m9k-Id03Kt1scFWvIuK354EHjiO0Y-d8mbO53QqSMRU")},8774:(e,t,s)=>{"use strict";s.d(t,{HW:()=>l,Jr:()=>c,gd:()=>n,h_:()=>r,pQ:()=>o,uT:()=>i,wx:()=>d});var a=s(6385);async function l(){let{data:{user:e},error:t}=await a.N.auth.getUser();if(t)throw t;return e}async function r(e){let{data:t,error:s}=await a.N.from("user_settings").select("*").eq("user_id",e).limit(1);if(s)throw console.error("Supabase error:",s),s;return t?.[0]||null}async function i(e,t){let{data:s,error:l}=await a.N.from("user_settings").upsert({user_id:e,...t,updated_at:new Date().toISOString()}).select().single();if(l)throw l;return s}async function n(e){let{data:t,error:s}=await a.N.from("knowledge_base").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return t||[]}async function o(e,t,s="knowledge.txt"){let{data:l,error:r}=await a.N.from("knowledge_base").insert({user_id:e,filename:s,content:t,file_type:"txt"}).select().single();if(r)throw r;return l}async function c(e){let{error:t}=await a.N.from("knowledge_base").delete().eq("id",e);if(t)throw t}async function d(e){let{count:t,error:s}=await a.N.from("voice_sessions").select("*",{count:"exact",head:!0}).eq("user_id",e);if(s)throw s;let{count:l,error:r}=await a.N.from("voice_test_transcripts").select("*",{count:"exact",head:!0}).eq("user_id",e);if(r)throw r;return{totalSessions:t||0,totalTranscripts:l||0}}}},e=>{e.O(0,[5946,8346,8441,8928,7358],()=>e(e.s=5086)),_N_E=e.O()}]);