{
  "meta": {
    "project": "Voxanne AI Receptionist MVP",
    "date": "2025-12-10",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "Voxanne MVP is a fully deployed AI-powered receptionist system designed for aesthetic clinics. It answers inbound calls, provides real-time call transcription, records conversations, uses a knowledge base for accurate agent responses, and escalates sensitive medical queries safely. The system includes a dashboard for monitoring call logs, managing AI assistant configurations, and seamless deployment with real-time updates.",
  "core_goals": [
    "Deliver a reliable AI receptionist capable of handling inbound calls with minimal latency.",
    "Provide real-time transcription and secure recording playback for calls.",
    "Enable AI-driven responses enhanced by a searchable knowledge base.",
    "Allow clinic owners to customize agent voice, language, and behavior.",
    "Ensure safe escalation of sensitive medical queries to human agents.",
    "Offer a comprehensive dashboard with real-time updates and analytics.",
    "Enforce strong authentication and data isolation for organizational security.",
    "Deploy a stable, scalable production environment with automated workflows.",
    "Implement robust retry and deduplication logic to handle webhook events reliably.",
    "Facilitate quick customer demos with a production-ready system."
  ],
  "key_features": [
    "Inbound call handling with Vapi webhook integration and call tracking.",
    "Call recording with secure storage and signed URLs for playback.",
    "Real-time transcription streamed via WebSocket to the dashboard.",
    "Call log dashboard featuring filters, pagination, analytics, and playback.",
    "Knowledge Base RAG with document upload, chunking, embedding, and vector search.",
    "Agent configuration panel allowing customization of greetings, voice, and language.",
    "Smart escalation rules for safe handling of medical and sensitive topics.",
    "Real-time dashboard updates using WebSockets with auto-reconnect and idempotency.",
    "User authentication with JWT, Google OAuth, and row level security.",
    "Production deployment on Render and Vercel with environment-driven configuration."
  ],
  "user_flow_summary": [
    "User logs into the dashboard via email/password or Google OAuth.",
    "Clinic uploads documents to knowledge base; system auto-chunks and indexes them.",
    "Incoming call triggers Vapi webhook; backend creates call record and connects agent.",
    "Agent conversation is transcribed live with speaker labels; transcript streamed via WebSocket.",
    "Upon call end, recording is downloaded, securely stored, and linked in call log.",
    "Call logs and analytics auto-update in dashboard in real-time with WebSocket.",
    "Agent answers customer queries using knowledge base context; escalates medical queries when detected.",
    "Business owner adjusts agent settings (voice, personality) via dashboard, syncing to Vapi.",
    "User reviews call details including recordings and transcripts through the dashboard modals.",
    "Admins monitor system health and logs via production URLs and backend endpoints."
  ],
  "validation_criteria": [
    "All 10 MVP features must be fully functional and deployed.",
    "Inbound calls initiated and answered automatically with no dropped events.",
    "Call recordings are saved, accessible via signed URLs, and playable on the dashboard.",
    "Real-time transcript updates correctly without duplicates or delays.",
    "Knowledge base document uploads result in synchronous chunking and embeddings.",
    "Agent customization changes are reflected immediately on subsequent calls.",
    "Medical escalation triggers correctly for sensitive queries with appropriate logging.",
    "WebSocket connections auto-reconnect and provide instant dashboard updates.",
    "Authentication and authorization prevent unauthorized data access effectively.",
    "Production deployment pipelines execute reliably with dynamic environment configuration."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Node.js",
      "Express",
      "Supabase",
      "Vapi",
      "Groq",
      "Jest",
      "WebSocket"
    ],
    "features": [
      {
        "name": "Webhooks API",
        "description": "Handles incoming webhooks from Vapi for call events (started, ended, transcript, recording).",
        "files": [
          "src/routes/webhooks.ts",
          "src/routes/vapi-webhook.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/webhooks/vapi": {
              "post": {
                "summary": "Receive Vapi webhooks",
                "responses": {
                  "200": {
                    "description": "Webhook processed successfully"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Calls API",
        "description": "Manage calls, start outbound calls, and retrieve call details.",
        "files": [
          "src/routes/calls.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/calls/start": {
              "post": {
                "summary": "Start outbound calls",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "leads": {
                            "type": "array"
                          },
                          "vapiAgentId": {
                            "type": "string"
                          },
                          "selectedVoice": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Calls initiated"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Calls Dashboard API",
        "description": "Retrieve call logs and metrics for the dashboard.",
        "files": [
          "src/routes/calls-dashboard.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/calls-dashboard": {
              "get": {
                "summary": "Get call logs",
                "responses": {
                  "200": {
                    "description": "List of calls"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Assistants API",
        "description": "Configure and manage AI assistants.",
        "files": [
          "src/routes/assistants.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/assistants": {
              "get": {
                "summary": "List assistants"
              },
              "post": {
                "summary": "Create assistant"
              }
            }
          }
        }
      },
      {
        "name": "Knowledge Base API",
        "description": "Manage knowledge base documents and RAG operations.",
        "files": [
          "src/routes/knowledge-base.ts",
          "src/routes/knowledge-base-rag.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/knowledge-base/upload": {
              "post": {
                "summary": "Upload document"
              }
            },
            "/api/knowledge-base/query": {
              "post": {
                "summary": "Query knowledge base"
              }
            }
          }
        }
      },
      {
        "name": "Vapi Setup API",
        "description": "Setup and discovery for Vapi integration.",
        "files": [
          "src/routes/vapi-setup.ts",
          "src/routes/vapi-discovery.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/vapi/setup": {
              "post": {
                "summary": "Setup Vapi integration"
              }
            }
          }
        }
      },
      {
        "name": "Inbound Setup API",
        "description": "Configure inbound call handling.",
        "files": [
          "src/routes/inbound-setup.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/inbound/config": {
              "post": {
                "summary": "Update inbound config"
              }
            }
          }
        }
      },
      {
        "name": "Founder Console API",
        "description": "Administrative endpoints for the founder console.",
        "files": [
          "src/routes/founder-console-v2.ts",
          "src/routes/founder-console-settings.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/founder-console/settings": {
              "get": {
                "summary": "Get settings"
              }
            }
          }
        }
      }
    ]
  }
}
